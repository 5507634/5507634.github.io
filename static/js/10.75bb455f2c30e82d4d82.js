webpackJsonp([10],{Q2f9:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"\n.btn_bar[data-v-68254f11] {\n  margin-top: -120px;\n}\n",""])},cNJb:function(t,e,n){t.exports=n.p+"static/img/insert_keycard.cd93e88.gif"},lbOj:function(t,e,n){"use strict";function i(t){n("px2y")}Object.defineProperty(e,"__esModule",{value:!0});var a=n("NYxO"),r=n("rWHx"),s=n.n(r),c=n("cNJb"),o=n.n(c),l={computed:Object(a.b)({device:function(t){return t.keycard}}),data:function(){return{img_nav:s.a,loading:!1,timer:null,img_insert_keycard:o.a}},methods:{startDevice:function(){var t=this;this.loading=!0,this.$store.dispatch("KeycardOpen").then(function(){t.loading=!1,t.timer=setInterval(function(){t.queryDevice()},1e3)}).catch(function(){t.loading=!1})},closeDevice:function(){null!=this.timer&&(clearInterval(this.timer),this.timer=null,this.$store.dispatch("KeycardClose").then(function(){}).catch(function(){}))},queryDevice:function(){var t=this;this.$store.dispatch("KeycardRead").then(function(){console.log(new Date,t.device.id),t.handleKeycard()}).catch(function(){})},handleKeycard:function(){var t=this;this.loading=!0,this.$store.dispatch("GetOrderByKeycard",this.device.id).then(function(){t.loading=!1,""===t.$store.state.order.id?t.$message({message:"没有该房卡对应订单信息，请重新插入正确的房卡!",type:"warning",duration:5e3}):t.$router.push({name:"checkout/bill"})}).catch(function(){t.loading=!1})},simulateKeycard:function(t){if(t)this.closeDevice(),this.startDevice();else{this.$alert('<p class="alert_title">未查询到相关信息!</p>查不到408房在住信息！<br/>请咨询前台！',"",{dangerouslyUseHTMLString:!0,type:"warning",showClose:!1,center:!0})}}},mounted:function(){},beforeDestroy:function(){this.closeDevice()}},u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("el-row",{attrs:{type:"flex",justify:"center"}},[n("img",{attrs:{src:t.img_nav,alt:"nav"}})]),t._v(" "),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("span",{staticClass:"txt_title"},[t._v("请插入房卡")])]),t._v(" "),n("el-row",{attrs:{type:"flex",justify:"center"}},[n("img",{attrs:{src:t.img_insert_keycard,alt:"insert_keycard"}})]),t._v(" "),n("el-row",{staticClass:"btn_bar",attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{span:10}},[n("el-button",{staticClass:"btn_large",attrs:{type:"primary"},nativeOn:{click:function(e){e.preventDefault(),t.simulateKeycard(!0)}}},[t._v("模拟有效卡")]),t._v(" "),n("el-button",{staticClass:"btn_large",attrs:{type:"primary"},nativeOn:{click:function(e){e.preventDefault(),t.simulateKeycard(!1)}}},[t._v("模拟无效卡")])],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("router-link",{attrs:{to:{name:"home"}}},[n("el-button",{staticClass:"btn_large",attrs:{type:"primary"}},[t._v("返回")])],1)],1)],1)],1)},d=[],f=n("XyMi"),p=i,y=Object(f.a)(l,u,d,!1,p,"data-v-68254f11",null);e.default=y.exports},px2y:function(t,e,n){var i=n("Q2f9");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("rjj0").default;a("e1827f22",i,!0,{})},rWHx:function(t,e,n){t.exports=n.p+"static/img/nav_checkout_insert_keycard.7c92b6d.png"}});